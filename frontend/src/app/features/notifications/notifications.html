<div class="max-w-4xl mx-auto">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">Notifications</h2>

    <div *ngIf="loading" class="text-center p-8">
        <p>Loading notifications...</p>
    </div>

    <mat-card *ngIf="!loading && notifications.length === 0" class="p-8 text-center bg-gray-50">
        <p class="text-gray-500">No notifications yet.</p>
    </mat-card>

    <div *ngIf="!loading && notifications.length > 0" class="space-y-4">
        <mat-card *ngFor="let notification of notifications"
            class="border-l-4 cursor-pointer transition-all hover:shadow-md"
            [class]="notification.read ? 'border-gray-300' : 'border-indigo-500'" (click)="openInsight(notification)">
            <div class="flex items-start p-4">
                <mat-icon [class]="notification.read ? 'text-gray-400 mr-4 mt-1' : 'text-indigo-500 mr-4 mt-1'">
                    {{ notification.read ? 'notifications_none' : 'notifications_active' }}
                </mat-icon>
                <div class="flex-1">
                    <p class="text-gray-800 font-medium">{{ notification.message }}</p>
                    <div class="flex items-center gap-2 mt-2 text-sm text-gray-500">
                        <span>{{ notification.sentAt | date:'medium' }}</span>
                        <span class="px-2 py-0.5 rounded-full bg-green-100 text-green-700 text-xs uppercase">{{
                            notification.status }}</span>
                        <span *ngIf="notification.insightId || notification.payload?.insight_id"
                            class="px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-700 text-xs">
                            <mat-icon class="text-sm align-middle"
                                style="font-size: 14px; height: 14px; width: 14px;">open_in_new</mat-icon>
                            View Insight
                        </span>
                    </div>
                </div>
            </div>
        </mat-card>
    </div>
</div>